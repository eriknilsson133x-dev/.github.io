/* css/main.css */
body {
  font-family: sans-serif;
  margin: 0;
  padding: 0;
  /* Let Tailwind light/dark classes control colors */
  background: var(--bg, #111827);
  color: var(--text, #f3f4f6);
/* css/main.css - simplified: color tokens are provided by JS (js/ui.js)
   This file only references CSS variables; palette values are set at runtime.
*/

body {
  font-family: sans-serif;
  margin: 0;
  padding: 0;
  background: var(--bg, #ffffff);
  color: var(--text, #0f172a);
}

:root {
  /* Minimal fallbacks (will be overridden by js/ui.js at runtime) */
  --bg: #ffffff;
  --surface: #ffffff;
  --card-bg: #ffffff;
  --text: #0f172a;
  --muted: #6b7280;
  --accent: #3b82f6;
  --btn-bg: #edf2f7;
  --btn-text: #0f172a;
  --border: #e5e7eb;
  --inner: #e6f4ff;
}

/* Core elements use CSS variables only */
nav {
  background: var(--surface);
  color: var(--text);
}

nav button {
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 1px solid var(--border);
}

nav button:hover { background: var(--accent); }

/* Day cards (planner) */
.day-card {
  background: var(--card-bg) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
}

/* Weekday / day label should follow theme text color */
.day-card .day-label {
  color: var(--text) !important;
}

/* Notes inside day cards follow the primary text color */
.day-card .day-note {
  color: var(--text) !important;
}

/* Utility class to show muted/secondary text according to theme */
.text-muted {
  color: var(--muted) !important;
}

/* Speaker / sound button should follow theme button colors */
#muteBtn {
  background: var(--btn-bg) !important;
  color: var(--btn-text) !important;
  border: 1px solid var(--border) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 48px !important;
  height: 48px !important;
  padding: 0 !important;
  line-height: 1 !important;
}

/* Ensure hover states don't clash with utility classes */
#muteBtn:hover {
  background: var(--accent) !important;
  color: var(--btn-text) !important;
}

/* Nudge the theme toggle (sun/moon) slightly to the right for spacing */
nav button[title="Toggle theme"] {
  margin-left: 0.5rem !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 48px !important;
  height: 48px !important;
  padding: 0 !important;
  background: var(--btn-bg) !important;
  color: var(--btn-text) !important;
  border: 1px solid var(--border) !important;
}

nav button[title="Toggle theme"] svg { width: 20px; height: 20px; }

/* Log date styling: larger and using theme text color */
.log-date {
  font-size: 1.75rem !important;
  font-weight: 600 !important;
  color: var(--text) !important;
  margin-bottom: 0.5rem !important;
}

/* Log entry hover uses accent; text inside entries uses muted token */
.log-entry .log-entry-content {
  transition: background-color 160ms ease, color 160ms ease;
}
.log-entry .log-entry-content:hover {
  background: var(--accent) !important;
}
.log-entry .log-entry-content:hover .text-muted {
  color: var(--btn-text) !important;
}
.log-entry .text-muted {
  color: var(--muted) !important;
}

/* Inner day box uses the generic `--inner` token */
.day-card .min-h-\[40px\] {
  background: var(--inner) !important;
}

.day-card button { background: transparent !important; color: var(--text) !important; }

/* Map common utility classes to CSS variables so Tailwind utilities follow runtime palette */
.bg-white { background-color: var(--card-bg) !important; color: var(--text) !important; }
.bg-gray-50 { background-color: var(--surface) !important; }
.bg-gray-100 { background-color: var(--surface) !important; }
.bg-gray-700, .bg-gray-800 { background-color: var(--btn-bg) !important; }
.text-white { color: var(--btn-text) !important; }
.border-gray-200, .border-gray-300, .border-gray-600 { border-color: var(--border) !important; }

/* Button / action colors */
.bg-blue-600 { background: var(--accent) !important; }
.hover\:bg-blue-500:hover { background: var(--accent) !important; }

/* Inputs, textareas, modals, toasts */
input.bg-white, textarea.bg-white, .bg-white { background: var(--card-bg) !important; color: var(--text) !important; }

.toast {
  position: fixed;
  top: 20px;
  right: 20px;
  background: var(--card-bg);
  color: var(--text);
  padding: 16px 24px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  z-index: 9999;
  animation: slideIn 0.3s, fadeOut 0.5s 2.5s forwards;
}

@keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes fadeOut { to { opacity: 0; transform: translateX(400px); } }

.confetti { position: fixed; width: 10px; height: 10px; background: var(--accent); top: -10px; animation: fall 3s linear forwards; z-index: 9998; }
@keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }

.dragging { opacity: 0.5; }

.drop-zone { min-height: 60px; border: 2px dashed var(--border); border-radius: 8px; padding: 8px; background: var(--surface); }

* { box-sizing: border-box; }

/* Ensure touch targets meet accessibility: all buttons at least 48x48 */
button { min-height: 48px; min-width: 48px; }

.dark .text-gray-700 { color: var(--muted) !important; }
.dark .shadow { box-shadow: none !important; }
.dark .bg-white { background-color: var(--card-bg) !important; }
/* Light-theme explicit overrides to ensure light utilities apply even if runtime classes vary */
.theme-light .bg-gray-100 { background-color: var(--bg) !important; }
.theme-light .bg-gray-50 { background-color: var(--btn-bg) !important; }
.theme-light .bg-white { background-color: var(--card-bg) !important; }
.theme-light .text-gray-900 { color: #0f172a !important; }
.theme-light .text-gray-700 { color: #374151 !important; }
.theme-light .text-gray-600,
.theme-light .text-gray-500,
.theme-light .text-gray-400 {
  color: #ffffff !important;
}
.theme-light .border-gray-200 { border-color: #e5e7eb !important; }
.theme-light .border-gray-300 { border-color: #d1d5db !important; }
.theme-light .drop-zone { background: var(--card-bg) !important; }
.theme-light nav { background: var(--bg) !important; }
.theme-light .day-card { background: var(--card-bg) !important; color: var(--text) !important; border-color: var(--border) !important; }

/* Make the inner day box slightly blue in Light theme */
.theme-light .day-card .min-h-\[40px\] { background: var(--inner) !important; }

/* High-specificity override in case utility classes or inline styles interfere: use a darker light tint */
html.theme-light .day-card .min-h-\[40px\] {
  background: #b6e0ff !important;
}
/* Light-mode fixes for darker utility classes used by buttons/cards */
.theme-light .bg-gray-700 { background-color: #e5e7eb !important; color: inherit !important; }
.theme-light .bg-gray-600 { background-color: #e5e7eb !important; }
.theme-light .bg-gray-800 { background-color: #f3f4f6 !important; }
.theme-light .hover\:bg-gray-600:hover { background-color: #e5e7eb !important; }
.theme-light .hover\:bg-gray-700:hover { background-color: #e5e7eb !important; }
.theme-light .text-white { color: #0f172a !important; }
.theme-light .shadow { box-shadow: 0 1px 2px rgba(16,24,40,0.05) !important; }
.theme-light .rounded-lg { border: 1px solid rgba(0,0,0,0.04); }

.drop-zone.drag-over {
  border-color: #3b82f6;
  background: #1f2937;
}

.accordion-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.accordion-content.open {
  max-height: 1000px;
}

* {
  box-sizing: border-box;
}

/* Ensure touch targets meet accessibility: all buttons at least 48x48 */
button {
  min-height: 48px;
  min-width: 48px;
}
